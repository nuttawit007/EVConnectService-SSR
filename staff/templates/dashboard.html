{% extends 'base_staff.html' %}

{% block content %}
    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-6 py-4 mt-4">
        <!-- Page Title -->
        <h1 class="text-4xl font-bold mb-5">Dashboard</h1>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Appointments Card -->
            <div class="bg-slate-800 rounded-xl overflow-hidden border-l-4 border-yellow-400">
                <div class="p-6">
                    <h3 class="text-xl text-slate-300 mb-2">Appointments</h3>
                    <p class="text-5xl font-bold">7</p>
                </div>
            </div>

            <!-- Vehicles Card -->
            <div class="bg-slate-800 rounded-xl overflow-hidden border-l-4 border-yellow-400">
                <div class="p-6">
                    <h3 class="text-xl text-slate-300 mb-2">Vehicles</h3>
                    <p class="text-5xl font-bold">12</p>
                </div>
            </div>

            <!-- Users Card -->
            <div class="bg-slate-800 rounded-xl overflow-hidden border-l-4 border-yellow-400">
                <div class="p-6">
                    <h3 class="text-xl text-slate-300 mb-2">Users</h3>
                    <p class="text-5xl font-bold">6</p>
                </div>
            </div>
        </div>

        <!-- Calendar and Rating Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Appointment Booking Date Calendar -->
            <div>
                <h2 class="text-2xl font-bold mb-4">Appointment booking date</h2>
                <div class="bg-slate-800 rounded-xl py-4 px-6">
                    <!-- Calendar Header -->
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="changeMonth(-1)" class="p-2 hover:bg-slate-700 rounded-lg transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                            </svg>
                        </button>
                        <h3 class="text-xl font-semibold" id="calendarMonth">October 2025</h3>
                        <button onclick="changeMonth(1)" class="p-2 hover:bg-slate-700 rounded-lg transition-colors">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Calendar Grid -->
                    <div class="grid grid-cols-7 gap-2">
                        <!-- Day Headers -->
                        <div class="text-center text-slate-400 py-2">Sun</div>
                        <div class="text-center text-slate-400 py-2">Mon</div>
                        <div class="text-center text-slate-400 py-2">Tue</div>
                        <div class="text-center text-slate-400 py-2">Wed</div>
                        <div class="text-center text-slate-400 py-2">Thu</div>
                        <div class="text-center text-slate-400 py-2">Fri</div>
                        <div class="text-center text-slate-400 py-2">Sat</div>

                        <!-- Calendar Days -->
                        <div id="calendarDays" class="col-span-7 grid grid-cols-7 gap-2">
                            <!-- Days will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rating Section -->
            <div>
                <h2 class="text-2xl font-bold mb-4">Rating</h2>
                <div class="bg-slate-800 rounded-xl p-6">
                    <div class="space-y-6">
                        <!-- 1 Star -->
                        <div class="flex items-center gap-4">
                            <span class="text-2xl font-semibold w-8">1</span>
                            <div class="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <span class="text-lg w-16 text-right">0%</span>
                        </div>

                        <!-- 2 Stars -->
                        <div class="flex items-center gap-4">
                            <span class="text-2xl font-semibold w-8">2</span>
                            <div class="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <span class="text-lg w-16 text-right">0%</span>
                        </div>

                        <!-- 3 Stars -->
                        <div class="flex items-center gap-4">
                            <span class="text-2xl font-semibold w-8">3</span>
                            <div class="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <span class="text-lg w-16 text-right">0%</span>
                        </div>

                        <!-- 4 Stars -->
                        <div class="flex items-center gap-4">
                            <span class="text-2xl font-semibold w-8">4</span>
                            <div class="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full transition-all duration-500" style="width: 10%"></div>
                            </div>
                            <span class="text-lg w-16 text-right">10%</span>
                        </div>

                        <!-- 5 Stars -->
                        <div class="flex items-center gap-4">
                            <span class="text-2xl font-semibold w-8">5</span>
                            <div class="flex-1 h-6 bg-slate-700 rounded-full overflow-hidden">
                                <div class="h-full bg-yellow-400 rounded-full transition-all duration-500" style="width: 90%"></div>
                            </div>
                            <span class="text-lg w-16 text-right">90%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Calendar functionality
        let currentDate = new Date(2025, 9, 1); // October 2025 (month is 0-indexed)
        
        // Dates with appointments (highlighted in yellow)
        const appointmentDates = [15, 16];

        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            // Update month display
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                            'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('calendarMonth').textContent = `${monthNames[month]} ${year}`;

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // Generate calendar days
            const calendarDays = document.getElementById('calendarDays');
            calendarDays.innerHTML = '';

            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                calendarDays.appendChild(emptyCell);
            }

            // Add days of month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                dayCell.className = 'text-center py-3 rounded-lg';
                
                // Check if this day has an appointment
                if (appointmentDates.includes(day)) {
                    dayCell.className += ' bg-yellow-400 text-slate-900 font-bold';
                } else {
                    dayCell.className += ' text-slate-300';
                }
                
                dayCell.textContent = day;
                calendarDays.appendChild(dayCell);
            }
        }

        function changeMonth(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            renderCalendar();
        }

        // Initial render
        renderCalendar();
    </script>
{% endblock %}
