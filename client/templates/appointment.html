{% extends 'base.html' %}

{% block content %}
<!-- Page Title -->
<div class="text-center mb-12 mt-12">
    <h1 class="text-4xl font-bold mb-3">Appointments</h1>
    <p class="text-slate-400">Your booking an appointment status</p>
</div>

<!-- Appointments Table -->
<div class="bg-gray-700/50 rounded-2xl border border-slate-800 overflow-hidden">
    <table class="w-full">
        <thead>
            <tr class="bg-gray-900 border-b border-slate-700">
                <th class="text-left px-8 py-4 font-medium text-slate-300">License plate</th>
                <th class="text-left px-8 py-4 font-medium text-slate-300">Service</th>
                <th class="text-left px-8 py-4 font-medium text-slate-300">Date & Time</th>
                <th class="text-left px-8 py-4 font-medium text-slate-300">Status</th>
                <th class="text-left px-8 py-4 font-medium text-slate-300">Review</th>
            </tr>
        </thead>
        <tbody>
            {% for ap in appointments %}
                <tr class="border-b border-slate-700 hover:bg-slate-800/30 transition-colors {% if ap.status|upper == 'REJECT' %} text-red-400 {% else %} text-white {% endif %}">
                    <td class="px-8 py-5">{{ap.license_plate}}</td>
                    <td class="px-8 py-5">{{ap.service}}</td>
                    <td class="px-8 py-5">{{ap.date_time}}</td>
                    <td class="px-8 py-5">
                        {% if ap.status|upper == 'PENDING'%}
                            <span class="inline-block px-5 py-1.5 bg-gray-200 border-3 border-gray-600 rounded-full text-sm font-medium text-slate-900 ">
                                {{ap.status}}
                            </span>
                        {% elif ap.status|upper == 'IN-PROGRESS' %}
                            <span class="inline-block px-5 py-1.5 bg-yellow-200 border-3 border-yellow-600 text-slate-900 rounded-full text-sm font-medium">
                                {{ap.status}}
                            </span>
                        {% elif ap.status|upper == 'DONE' %}
                            <span class="inline-block px-5 py-1.5 bg-green-200 border-3 border-green-600 text-slate-900 rounded-full text-sm font-medium">
                                {{ap.status}}
                            </span>
                        {% elif ap.status|upper == 'REJECT' %}
                            <span class="inline-block px-5 py-1.5 bg-red-200 border-3 border-red-600 text-slate-900 rounded-full text-sm font-medium">
                                {{ap.status}}
                            </span>
                        {% endif %}
                    </td>
                    <td class="px-8 py-5">
                        {% if ap.status|upper == 'DONE' and ap.rating != None %}
                        <a href="{% url 'rating' appointment_id=1 %}">
                            <button class="px-6 py-2 bg-yellow-400 hover:bg-yellow-300 text-slate-900 rounded-full font-medium transition-colors">
                                {{ap.rating}} point
                            </button>
                        </a>
                        {% elif ap.status|upper == 'DONE' and ap.rating == None %}
                            <a href="{% url 'rating' appointment_id=1 %}">
                                <button class="px-6 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-full transition-colors">
                                    review
                                </button>
                            </a>
                        {% else %}
                            -
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
